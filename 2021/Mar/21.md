# March 21st 2021

https://www.drovio.com/ - Remote pairing tool

https://github.com/earthly/earthly - Build automation tool
https://earthly.dev/

---

https://www.amazon.in/Implementing-Domain-Driven-Design-Vernon/dp/9332545480/

https://www.google.com/search?q=infrastructure+as+code+second+edition+india+edition

https://www.amazon.in/s?k=infrastructure+as+code&crid=1JK9RMP8ZN3YG&sprefix=infrastru%2Caps%2C300&ref=nb_sb_ss_ts-doa-p_1_9

https://www.amazon.in/Infrastructure-Code-Dynamic-Systems-Grayscale/dp/9385889796/

https://www.google.com/search?q=system+design+books

https://blog.pragmaticengineer.com/system-design-interview-an-insiders-guide-review/

https://www.amazon.in/s?k=System+Design+Interview+-+An+insider%27s+guide%2C+Second+Edition&i=stripbooks&ref=nb_sb_noss

https://www.amazon.in/System-Design-Interview-Insiders-Guide-ebook/dp/B08B3FWYBX/

https://courses.systeminterview.com/courses/system-design-interview-an-insider-s-guide

https://systeminterview.com/

https://systeminterview.com/scale-from-zero-to-millions-of-users.php

https://www.google.com/search?q=alex+xu+system+design+interview+book

---

Git - pull / fetch only remote repo, no push - no push by mistake - because of
PR model. So, even if one has access, no push to master directly. Or even a
branch in the shared remote repo. Only push to our own repo which we can keep
in sync and then raise PRs etc. This is popular in Open Source culture

https://duckduckgo.com/?t=ffab&q=git+remote+repo+only+for+fetch+and+not+push&ia=web

http://stackoverflow.com/questions/7556155/ddg#7556269

http://sushihangover.github.io/git-set-up-a-fetch-only-remote/

```bash
$ g remote -v
origin	git@github.com:google/protobuf-gradle-plugin.git (fetch)
origin	git@github.com:google/protobuf-gradle-plugin.git (push)
$ g remote rename origin upstream
$ g remote -v
upstream	git@github.com:google/protobuf-gradle-plugin.git (fetch)
upstream	git@github.com:google/protobuf-gradle-plugin.git (push)
$ g remote set-url --push upstream DISABLE
$ g remote -v
upstream	git@github.com:google/protobuf-gradle-plugin.git (fetch)
upstream	DISABLE (push)
```

I'm now struggling to get some File Descriptor Set and File Descriptor stuff
figured out. Hmm

I need to pass in empty dependencies for now. But the in the past I remember how
we had to provide dependencies in the right order or else things just broke ðŸ¤·
And right order is a lot of work! But it was needed as we had too many proto
files and all.

```java
package io.github.karuppiah7890.kafkaprotobufproducer;

import com.google.protobuf.DescriptorProtos;
import com.google.protobuf.Descriptors;
import com.google.protobuf.util.JsonFormat;
import io.github.karuppiah7890.kafkaprotobufproducer.SearchRequestOuterClass.SearchRequest;
import org.apache.kafka.clients.producer.KafkaProducer;
import org.apache.kafka.clients.producer.Producer;
import org.apache.kafka.clients.producer.ProducerRecord;
import org.junit.jupiter.api.Test;

import java.io.FileInputStream;
import java.io.IOException;
import java.util.ArrayList;
import java.util.Arrays;
import java.util.List;
import java.util.Properties;

class KafkaProtobufProducerAppTest {
    @Test
    void produceDummyProtobufMessageDataIntoKafka() {
        Properties props = new Properties();
        props.put("bootstrap.servers", "localhost:9092");
        props.put("acks", "all");
        props.put("retries", 0);
        props.put("linger.ms", 1);
        props.put("key.serializer", "org.apache.kafka.common.serialization.StringSerializer");
        props.put("value.serializer", "org.apache.kafka.common.serialization.ByteArraySerializer");

        SearchRequest searchRequest = SearchRequest.newBuilder()
                .setPageNumber(1)
                .setResultPerPage(5)
                .setQuery("meh-query")
                .build();

        Producer<String, byte[]> producer = new KafkaProducer<>(props);
        for (int i = 0; i < 100; i++)
            producer.send(new ProducerRecord<>("my-topic", Integer.toString(i), searchRequest.toByteArray()));

        producer.close();
    }

    @Test
    void convertJSONIntoProtobufMessage() throws IOException {
        String protobufMessageAsJSONString = "{\"query\":\"meh-query\",\"pageNumber\":1,\"resultPerPage\":5}";

        JsonFormat.Parser parser = JsonFormat.parser();

//        DescriptorProtos.DescriptorProto descriptorProto = DescriptorProtos.DescriptorProto.newBuilder()
//                .build();
//
        var descriptorFilePath = "/Users/karuppiahn/oss/github.com/karuppiah7890/kafka-protobuf-producer/backend/java/build/descriptors/test.desc";

        var descriptorFile = new FileInputStream(descriptorFilePath);

        DescriptorProtos.FileDescriptorSet fileDescriptorSet = DescriptorProtos.FileDescriptorSet.parseFrom(descriptorFile);

        DescriptorProtos.FileDescriptorProto fileDescriptorProto = fileDescriptorSet.getFileList().stream()
                .filter(fdsProto -> fdsProto.getName().equals("search-request.proto"))
                .findFirst().get();

        Descriptors.FileDescriptor fileDescriptor = Descriptors.FileDescriptor.buildFrom(fileDescriptorProto, );


//
//        DynamicMessage dynamicMessage = DynamicMessage.newBuilder().build();
//
//        Message.Builder messageBuilder;
//        parser.merge(protobufMessageAsJSONString, messageBuilder);
    }
}
```

I have to pass in an empty array for dependencies field. But I couldn't do it.
Gotta check how to do that tomorrow!

https://duckduckgo.com/?t=ffab&q=java+create+empty+array&ia=web&iax=qa

https://alabamacodecamp.com/java/how-to-make-an-array-empty-in-java.html

https://alabamacodecamp.com/java/how-to-initialize-an-empty-array-in-java.html
